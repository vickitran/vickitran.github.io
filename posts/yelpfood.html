<!DOCTYPE html>
<meta charset="utf-8">
<html lang="en">
<style>
    .svg {
        paint-order: stroke;
    }
</style>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Reviewing Toronto's Dinesafe Food Inspection Records</title>

    <!-- Bootstrap Core CSS -->
    <link href="../../css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../../css/clean-blog.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <link rel="icon" href="../../img/favicon.ico" type="image/ico" sizes="16x16">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>

</head>

<body>
  <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../../index.html">Math and Stuff</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="../../index.html">Home</a>
                    </li>
                    <li>
                        <a href="../../about.html">About</a>
                    </li>
                    <li>
                        <a href="../../postindex.html">Blog</a>
                    </li>
                    <li>
                        <a href="../../project.html">Projects</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>
    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" style="background-image: url('../../img/post-bg.jpg')">
        <div class="container">
            <div class="row">
                 <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1 align="center">Reviewing Toronto's Dinesafe Food Inspection Records<h1>
                    </div>
                </div>
            </div>
        </div>
    </header>
 <!-- Post Content -->
    <div class="container">

        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-100 col-md-offset-1" id = "b">
                <p>I stumbled across a data science article suggesting projects that utilize local open sourced data, one of the ideas was to predict food inspection grades based on type of restaurant. Unfortunately for me, Toronto's open-source data does not specify the cuisine style of each restaurant.</p>
                <p>Reading about the infraction details gave me another fun data science project idea. Based on my own experiences, questionably clean "hole in the wall" restaurants often have delicious food. Which leads to the hypothesis I wish to test in this post. <strong>How do Food Inspection Scores correlate with Yelp Reviews?</strong></p>
                <h3>Data Sources:</h3>
                Toronto DineSafe has a wonderfully maintained XML report which I have included in the sources below. I wrote a quick Python script (<code>xml_csv.py</code> ) to convert the data into CSV format. Below is a list of collected features and their definition.
                <br>
                <ul>
                    <li><strong>ESTABLISHMENT_NAME</strong> – Business name of the establishment</li>
                    <li><strong>ESTABLISHMENTTYPE</strong> – Establishment type ie restaurant, mobile cart</li>
                    <li><strong>ESTABLISHMENT_ADDRESS</strong> – Municipal address of the establishment</li>
                    <li><strong>INFRACTION_DETAILS</strong> - Description of the Infraction</li>
                    <li><strong>SEVERITY</strong> - Level of the infraction, i.e. S – Significant, M – Minor, C – Crucial</li>

                </ul>
                <p>Collecting Yelp data involved a little more effort. I followed an example listed in the following blog post <a href = "http://letstalkdata.com/2014/02/how-to-use-the-yelp-api-in-python/"> How to use the Yelp API in Python - Let's Talk Data</a>. I created a separate data frame containing only restaurant names and their addresses which was then passed into the Yelp query. In order to guarantee that the right restaurant would be returned, I added "CA" (Canada) as the country code and "Ontario" into the location term. </p>
                <p>The JSON request was transformed into a Python Dict for accessibility. Assuming that the first result showed the desired restaurant, the rating and address were written to a new CSV file.</p>

                <h3>Cleaning the Data:</h3>
                <p>A number of issues arose from collecting the Yelp data. It was quite possible to return the wrong restaurant when building the request. If the restaurant does not have a Yelp page, the search yields establishments close to the requested address. After the data was collected, the address from Yelp is compared to the DineSafe <strong>ESTABLISHMENT_ADDRESS</strong> and any mismatches are removed</p>

                To be continued...


                 <!-- Sources -->
                <hr size="4" noshade>
                <p>
                <b>Sources</b><br>
                <a href = "http://www1.toronto.ca/wps/portal/contentonly?vgnextoid=b54a5f9cd70bb210VgnVCM1000003dd60f89RCRD"> Toronto DineSafe - Decemeber 2015</a> <br>
                <a href = "http://letstalkdata.com/2014/02/how-to-use-the-yelp-api-in-python/"> How to use the Yelp API in Python - Let's Talk Data</a> <br>
                <a href = "https://www.yelp.ca/developers"> Yelp Developer's API</a> <br>
                </p>
            </div>
        </div>
    </div>
    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                      <li>
                            <a href="https://github.com/vickitran">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://ca.linkedin.com/in/vickictran">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="../../js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../../js/bootstrap.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="../../js/clean-blog.min.js"></script>
</body>
</html>
